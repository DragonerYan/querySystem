import{r as a,o as e,c as t,w as s,i as l,a as o,b as u,s as n,d as i,e as d}from"./index-93422e90.js";import{_ as m}from"./uni-data-picker.33492d54.js";import{_ as r,r as c}from"./uni-app.es.1373d43e.js";import{_ as p,a as f,b as v}from"./uni-forms.f3c5ebdb.js";import{_ as y}from"./uni-card.aef5c7c5.js";import{_}from"./uv-button.42436f61.js";import{c as b,g as x,l as j}from"./baseApi.a7600fac.js";import{t as w}from"./toast.7b8a428a.js";import"./uni-cloud.es.789f472f.js";import"./uv-icon.4fb46f40.js";const V=r({__name:"index",setup(r){let V=!1;const g=a([]),I=a({userName:"",password:"",province:"",city:"",street:"",county:"",communityId:"",communityName:""}),h=a=>{if(V)return V=!1;V=!0,N()};(async()=>{const a=await b();g.value=x(a.data)})();const N=async()=>{const a={...I.value};return a.communityId?a.userName?a.password?(await j(a),w("登录成功"),delete a.password,n("userInfo",a),void i({url:"/pages/home/index"})):w("请输入密码"):w("请输入账号"):w("请选择省市区街道社区")},k=a=>{const e=a.detail.value,t=e[4].value.split(";");I.value=Object.assign(I.value,{province:e[0].text,city:e[1].text,street:e[3].text,county:e[2].text,communityId:t[0],communityName:e[4].text,latitude:t[1],longitude:t[2]})};return(a,n)=>{const i=l,r=c(d("uni-data-picker"),m),b=c(d("uni-forms-item"),p),x=c(d("uni-easyinput"),f),j=c(d("uni-forms"),v),w=c(d("uni-card"),y),V=c(d("uv-button"),_);return e(),t(i,{class:"box"},{default:s((()=>[o(i,{class:"body"},{default:s((()=>[o(i,{class:"titlebox"},{default:s((()=>[o(i,{class:"tit",style:{"text-align":"center",width:"100%"}},{default:s((()=>[u("请登录")])),_:1})])),_:1}),o(w,{isFull:!0,style:{"margin-top":"32rpx"}},{default:s((()=>[o(j,{modelValue:I.value,"label-position":"top","label-width":"fit-content"},{default:s((()=>[o(b,{label:"省市区街道社区",name:"communityId"},{default:s((()=>[o(r,{localdata:g.value,modelValue:I.value.communityId,"onUpdate:modelValue":n[0]||(n[0]=a=>I.value.communityId=a),"popup-title":"请选择地区",onChange:k},null,8,["localdata","modelValue"])])),_:1}),o(b,{name:"username",label:"账户"},{default:s((()=>[o(x,{modelValue:I.value.userName,"onUpdate:modelValue":n[1]||(n[1]=a=>I.value.userName=a),placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),o(b,{name:"password",label:"密码"},{default:s((()=>[o(x,{type:"password",modelValue:I.value.password,"onUpdate:modelValue":n[2]||(n[2]=a=>I.value.password=a),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1}),o(i,{class:"btns"},{default:s((()=>[o(V,{type:"primary",text:"登录",onClick:h})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-bdb2c690"]]);export{V as default};
