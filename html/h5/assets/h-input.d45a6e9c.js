var e,t,l,a;import{D as s,a as i,_ as o}from"./uni-data-picker.fbb2b343.js";import{f as n,o as c,a as d,w as r,d as u,t as h,g as p,F as m,q as f,k as b,x as y,b as g,l as v,m as k,i as C,a5 as S,a6 as D,a7 as x,a8 as _,a9 as V,Q as z,v as $,A as L,r as I,J as B,u as w,aa as T,ab as N}from"./index-f9923a45.js";import{_ as E,r as A}from"./uni-app.es.05b2e329.js";import{a as R}from"./uni-forms.921cd8d3.js";import{m as F,a as U,_ as H}from"./uv-icon.5bb898f1.js";const P=E({name:"uniDataChecklist",mixins:[s.mixinDatacom||{}],emits:["input","update:modelValue","change"],props:{mode:{type:String,default:"default"},multiple:{type:Boolean,default:!1},value:{type:[Array,String,Number],default:()=>""},modelValue:{type:[Array,String,Number],default:()=>""},localdata:{type:Array,default:()=>[]},min:{type:[Number,String],default:""},max:{type:[Number,String],default:""},wrap:{type:Boolean,default:!1},icon:{type:String,default:"left"},selectedColor:{type:String,default:""},selectedTextColor:{type:String,default:""},emptyText:{type:String,default:"暂无数据"},disabled:{type:Boolean,default:!1},map:{type:Object,default:()=>({text:"text",value:"value"})}},watch:{localdata:{handler(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},deep:!0},mixinDatacomResData(e){this.range=e,this.dataList=this.getDataList(this.getSelectedValue(e))},value(e){this.dataList=this.getDataList(e)},modelValue(e){this.dataList=this.getDataList(e)}},data:()=>({dataList:[],range:[],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},isLocal:!0,styles:{selectedColor:"#2979ff",selectedTextColor:"#666"},isTop:0}),computed:{dataValue(){return""===this.value?this.modelValue:(this.modelValue,this.value)}},created(){this.localdata&&0!==this.localdata.length?(this.isLocal=!0,this.range=this.localdata,this.dataList=this.getDataList(this.getSelectedValue(this.range))):this.collection&&(this.isLocal=!1,this.loadData())},methods:{loadData(){this.mixinDatacomGet().then((e=>{this.mixinDatacomResData=e.result.data,0===this.mixinDatacomResData.length?(this.isLocal=!1,this.mixinDatacomErrorMessage=this.emptyText):this.isLocal=!0})).catch((e=>{this.mixinDatacomErrorMessage=e.message}))},getForm(e="uniForms"){let t=this.$parent,l=t.$options.name;for(;l!==e;){if(t=t.$parent,!t)return!1;l=t.$options.name}return t},chagne(e){const t=e.detail.value;let l={value:[],data:[]};if(this.multiple)this.range.forEach((e=>{t.includes(e[this.map.value]+"")&&(l.value.push(e[this.map.value]),l.data.push(e))}));else{const e=this.range.find((e=>e[this.map.value]+""===t));e&&(l={value:e[this.map.value],data:e})}this.$emit("input",l.value),this.$emit("update:modelValue",l.value),this.$emit("change",{detail:l}),this.multiple?this.dataList=this.getDataList(l.value,!0):this.dataList=this.getDataList(l.value)},getDataList(e){let t=JSON.parse(JSON.stringify(this.range)),l=[];return this.multiple&&(Array.isArray(e)||(e=[])),t.forEach(((t,a)=>{if(t.disabled=t.disable||t.disabled||!1,this.multiple)if(e.length>0){let l=e.find((e=>e===t[this.map.value]));t.selected=void 0!==l}else t.selected=!1;else t.selected=e===t[this.map.value];l.push(t)})),this.setRange(l)},setRange(e){let t=e.filter((e=>e.selected)),l=Number(this.min)||0,a=Number(this.max)||"";return e.forEach(((s,i)=>{if(this.multiple){if(t.length<=l){void 0!==t.find((e=>e[this.map.value]===s[this.map.value]))&&(s.disabled=!0)}if(t.length>=a&&""!==a){void 0===t.find((e=>e[this.map.value]===s[this.map.value]))&&(s.disabled=!0)}}this.setStyles(s,i),e[i]=s})),e},setStyles(e,t){e.styleBackgroud=this.setStyleBackgroud(e),e.styleIcon=this.setStyleIcon(e),e.styleIconText=this.setStyleIconText(e),e.styleRightIcon=this.setStyleRightIcon(e)},getSelectedValue(e){if(!this.multiple)return this.dataValue;let t=[];return e.forEach((e=>{e.selected&&t.push(e[this.map.value])})),this.dataValue.length>0?this.dataValue:t},setStyleBackgroud(e){let t={},l=this.selectedColor?this.selectedColor:"#2979ff";this.selectedColor&&("list"!==this.mode&&(t["border-color"]=e.selected?l:"#DCDFE6"),"tag"===this.mode&&(t["background-color"]=e.selected?l:"#f5f5f5"));let a="";for(let s in t)a+=`${s}:${t[s]};`;return a},setStyleIcon(e){let t={},l="";if(this.selectedColor){let l=this.selectedColor?this.selectedColor:"#2979ff";t["background-color"]=e.selected?l:"#fff",t["border-color"]=e.selected?l:"#DCDFE6",!e.selected&&e.disabled&&(t["background-color"]="#F2F6FC",t["border-color"]=e.selected?l:"#DCDFE6")}for(let a in t)l+=`${a}:${t[a]};`;return l},setStyleIconText(e){let t={},l="";if(this.selectedColor){let l=this.selectedColor?this.selectedColor:"#2979ff";"tag"===this.mode?t.color=e.selected?this.selectedTextColor?this.selectedTextColor:"#fff":"#666":t.color=e.selected?this.selectedTextColor?this.selectedTextColor:l:"#666",!e.selected&&e.disabled&&(t.color="#999")}for(let a in t)l+=`${a}:${t[a]};`;return l},setStyleRightIcon(e){let t={},l="";"list"===this.mode&&(t["border-color"]=e.selected?this.styles.selectedColor:"#DCDFE6");for(let a in t)l+=`${a}:${t[a]};`;return l}}},[["render",function(e,t,l,a,s,o){const z=A(n("uni-load-more"),i),$=k,L=C,I=S,B=D,w=x,T=_,N=V;return c(),d(L,{class:"uni-data-checklist",style:y({"margin-top":s.isTop+"px"})},{default:r((()=>[s.isLocal?(c(),p(m,{key:1},[l.multiple?(c(),d(w,{key:0,class:f(["checklist-group",{"is-list":"list"===l.mode||l.wrap}]),onChange:o.chagne},{default:r((()=>[(c(!0),p(m,null,b(s.dataList,((e,t)=>(c(),d(B,{class:f(["checklist-box",["is--"+l.mode,e.selected?"is-checked":"",l.disabled||e.disabled?"is-disable":"",0!==t&&"list"===l.mode?"is-list-border":""]]),style:y(e.styleBackgroud),key:t},{default:r((()=>[g(I,{class:"hidden",hidden:"",disabled:l.disabled||!!e.disabled,value:e[l.map.value]+"",checked:e.selected},null,8,["disabled","value","checked"]),"tag"!==l.mode&&"list"!==l.mode||"list"===l.mode&&"left"===l.icon?(c(),d(L,{key:0,class:"checkbox__inner",style:y(e.styleIcon)},{default:r((()=>[g(L,{class:"checkbox__inner-icon"})])),_:2},1032,["style"])):v("",!0),g(L,{class:f(["checklist-content",{"list-content":"list"===l.mode&&"left"===l.icon}])},{default:r((()=>[g($,{class:"checklist-text",style:y(e.styleIconText)},{default:r((()=>[u(h(e[l.map.text]),1)])),_:2},1032,["style"]),"list"===l.mode&&"right"===l.icon?(c(),d(L,{key:0,class:"checkobx__list",style:y(e.styleBackgroud)},null,8,["style"])):v("",!0)])),_:2},1032,["class"])])),_:2},1032,["class","style"])))),128))])),_:1},8,["class","onChange"])):(c(),d(N,{key:1,class:f(["checklist-group",{"is-list":"list"===l.mode,"is-wrap":l.wrap}]),onChange:o.chagne},{default:r((()=>[(c(!0),p(m,null,b(s.dataList,((e,t)=>(c(),d(B,{class:f(["checklist-box",["is--"+l.mode,e.selected?"is-checked":"",l.disabled||e.disabled?"is-disable":"",0!==t&&"list"===l.mode?"is-list-border":""]]),style:y(e.styleBackgroud),key:t},{default:r((()=>[g(T,{class:"hidden",hidden:"",disabled:l.disabled||e.disabled,value:e[l.map.value]+"",checked:e.selected},null,8,["disabled","value","checked"]),"tag"!==l.mode&&"list"!==l.mode||"list"===l.mode&&"left"===l.icon?(c(),d(L,{key:0,class:"radio__inner",style:y(e.styleBackgroud)},{default:r((()=>[g(L,{class:"radio__inner-icon",style:y(e.styleIcon)},null,8,["style"])])),_:2},1032,["style"])):v("",!0),g(L,{class:f(["checklist-content",{"list-content":"list"===l.mode&&"left"===l.icon}])},{default:r((()=>[g($,{class:"checklist-text",style:y(e.styleIconText)},{default:r((()=>[u(h(e[l.map.text]),1)])),_:2},1032,["style"]),"list"===l.mode&&"right"===l.icon?(c(),d(L,{key:0,style:y(e.styleRightIcon),class:"checkobx__list"},null,8,["style"])):v("",!0)])),_:2},1032,["class"])])),_:2},1032,["class","style"])))),128))])),_:1},8,["class","onChange"]))],64)):(c(),d(L,{key:0,class:"uni-data-loading"},{default:r((()=>[e.mixinDatacomErrorMessage?(c(),d($,{key:1},{default:r((()=>[u(h(e.mixinDatacomErrorMessage),1)])),_:1})):(c(),d(z,{key:0,status:"loading",iconType:"snow",iconSize:18,"content-text":s.contentText},null,8,["content-text"]))])),_:1}))])),_:1},8,["style"])}],["__scopeId","data-v-56cecf7b"]]);const j=E({name:"uv-checkbox",mixins:[F,U,{props:{name:{type:[String,Number,Boolean],default:""},shape:{type:String,default:""},size:{type:[String,Number],default:""},checked:{type:Boolean,default:!1},disabled:{type:[String,Boolean],default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},iconSize:{type:[String,Number],default:""},iconColor:{type:String,default:""},label:{type:[String,Number],default:""},labelSize:{type:[String,Number],default:""},labelColor:{type:String,default:""},labelDisabled:{type:[String,Boolean],default:""},...null==(t=null==(e=uni.$uv)?void 0:e.props)?void 0:t.checkbox}}],data:()=>({isChecked:!1,parentData:{iconSize:12,labelDisabled:null,disabled:null,shape:"square",activeColor:null,inactiveColor:null,size:18,modelValue:null,iconColor:null,placement:"row",borderBottom:!1,iconPlacement:"left",labelSize:14,labelColor:"#303133"}}),computed:{elDisabled(){return""!==this.disabled?this.disabled:null!==this.parentData.disabled&&this.parentData.disabled},elLabelDisabled(){return""!==this.labelDisabled?this.labelDisabled:null!==this.parentData.labelDisabled&&this.parentData.labelDisabled},elSize(){return this.size?this.size:this.parentData.size?this.parentData.size:21},elIconSize(){return this.iconSize?this.iconSize:this.parentData.iconSize?this.parentData.iconSize:12},elActiveColor(){return this.activeColor?this.activeColor:this.parentData.activeColor?this.parentData.activeColor:"#2979ff"},elInactiveColor(){return this.inactiveColor?this.inactiveColor:this.parentData.inactiveColor?this.parentData.inactiveColor:"#c8c9cc"},elLabelColor(){return this.labelColor?this.labelColor:this.parentData.labelColor?this.parentData.labelColor:"#606266"},elShape(){return this.shape?this.shape:this.parentData.shape?this.parentData.shape:"circle"},elLabelSize(){return this.$uv.addUnit(this.labelSize?this.labelSize:this.parentData.labelSize?this.parentData.labelSize:"15")},elIconColor(){const e=this.iconColor?this.iconColor:this.parentData.iconColor?this.parentData.iconColor:"#ffffff";return this.elDisabled?this.isChecked?this.elInactiveColor:"transparent":this.isChecked?e:"transparent"},iconClasses(){let e=[];return e.push("uv-checkbox__icon-wrap--"+this.elShape),this.elDisabled&&e.push("uv-checkbox__icon-wrap--disabled"),this.isChecked&&this.elDisabled&&e.push("uv-checkbox__icon-wrap--disabled--checked"),e},iconWrapStyle(){const e={};return e.backgroundColor=this.isChecked&&!this.elDisabled?this.elActiveColor:"#ffffff",e.borderColor=this.isChecked&&!this.elDisabled?this.elActiveColor:this.elInactiveColor,e.width=this.$uv.addUnit(this.elSize),e.height=this.$uv.addUnit(this.elSize),"right"===this.parentData.iconPlacement&&(e.marginRight=0),e},checkboxStyle(){const e={};return this.parentData.borderBottom&&"row"===this.parentData.placement&&this.$uv.error("检测到您将borderBottom设置为true，需要同时将uv-checkbox-group的placement设置为column才有效"),this.parentData.borderBottom&&"column"===this.parentData.placement&&(e.paddingBottom="8px"),this.$uv.deepMerge(e,this.$uv.addStyle(this.customStyle))}},mounted(){this.init()},methods:{init(){this.updateParentData(),this.parent||this.$uv.error("uv-checkbox必须搭配uv-checkbox-group组件使用");const e=this.parentData.modelValue;this.checked?this.isChecked=!0:this.$uv.test.array(e)&&(this.isChecked=e.some((e=>e===this.name)))},updateParentData(){this.getParentData("uv-checkbox-group")},wrapperClickHandler(e){"right"===this.parentData.iconPlacement&&this.iconClickHandler(e)},iconClickHandler(e){this.preventEvent(e),this.elDisabled||this.setRadioCheckedStatus()},labelClickHandler(e){this.preventEvent(e),this.elLabelDisabled||this.elDisabled||this.setRadioCheckedStatus()},emitEvent(){this.$emit("change",this.isChecked),this.$nextTick((()=>{this.$uv.formValidate(this,"change")}))},setRadioCheckedStatus(){this.isChecked=!this.isChecked,this.emitEvent(),"function"==typeof this.parent.unCheckedOther&&this.parent.unCheckedOther(this)}},watch:{checked(){this.isChecked=this.checked}}},[["render",function(e,t,l,a,s,i){const o=A(n("uv-icon"),H),p=C,m=k;return c(),d(p,{class:f(["uv-checkbox",[`uv-checkbox-label--${s.parentData.iconPlacement}`,s.parentData.borderBottom&&"column"===s.parentData.placement&&"uv-border-bottom"]]),style:y([i.checkboxStyle]),onClick:z(i.wrapperClickHandler,["stop"])},{default:r((()=>[g(p,{class:f(["uv-checkbox__icon-wrap",i.iconClasses]),onClick:z(i.iconClickHandler,["stop"]),style:y([i.iconWrapStyle])},{default:r((()=>[$(e.$slots,"icon",{},(()=>[g(o,{class:"uv-checkbox__icon-wrap__icon",name:"checkbox-mark",size:i.elIconSize,color:i.elIconColor},null,8,["size","color"])]),!0)])),_:3},8,["onClick","class","style"]),$(e.$slots,"default",{},(()=>[g(m,{onClick:z(i.labelClickHandler,["stop"]),style:y({color:i.elDisabled?i.elInactiveColor:i.elLabelColor,fontSize:i.elLabelSize,lineHeight:i.elLabelSize})},{default:r((()=>[u(h(e.label),1)])),_:1},8,["onClick","style"])]),!0)])),_:3},8,["style","onClick","class"])}],["__scopeId","data-v-8ca14e61"]]);const O=E({name:"uv-checkbox-group",mixins:[F,U,{props:{name:{type:String,default:""},modelValue:{type:Array,default:()=>[]},shape:{type:String,default:"square"},disabled:{type:Boolean,default:!1},activeColor:{type:String,default:"#2979ff"},inactiveColor:{type:String,default:"#c8c9cc"},size:{type:[String,Number],default:18},placement:{type:String,default:"row"},labelSize:{type:[String,Number],default:14},labelColor:{type:[String],default:"#303133"},labelDisabled:{type:Boolean,default:!1},iconColor:{type:String,default:"#fff"},iconSize:{type:[String,Number],default:12},iconPlacement:{type:String,default:"left"},borderBottom:{type:Boolean,default:!1},...null==(a=null==(l=uni.$uv)?void 0:l.props)?void 0:a.checkboxGroup}}],computed:{parentData(){return[this.modelValue,this.disabled,this.inactiveColor,this.activeColor,this.size,this.labelDisabled,this.shape,this.iconSize,this.borderBottom,this.placement,this.labelSize,this.labelColor]},bemClass(){return this.bem("checkbox-group",["placement"])}},watch:{parentData(){this.children.length&&this.children.map((e=>{"function"==typeof e.init&&e.init()}))}},data:()=>({}),created(){this.children=[]},methods:{unCheckedOther(e){const t=[];this.children.map((e=>{e.isChecked&&t.push(e.name)})),this.$emit("change",t),this.$emit("update:modelValue",t)}}},[["render",function(e,t,l,a,s,i){const o=C;return c(),d(o,{class:f(["uv-checkbox-group",i.bemClass]),style:y([e.$uv.addStyle(this.customStyle)])},{default:r((()=>[$(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-b7f56c9d"]]),M=E({__name:"h-input",props:{msg:{type:[String,Array,Number],default:""},type:{type:String,default:"number"},placeholder:{type:String,default:"请输入"},options:{type:[Array,Object,Function],default:()=>[]}},emits:["update:msg","change"],setup(e,{emit:t}){const l=e,a=e=>{t("update:msg",e)},s=L({get:()=>l.msg,set(e){Array.isArray(e)?S(e):a(e)}}),i=()=>{t("chage",s)},u=()=>{},h=I(0),f=e=>{h.value=e.detail.value;const t=l.options[h.value];a(t)},y=I([]);let k=[];const S=e=>{const t=l.options.find((e=>e.team));let s=e;if(e.length&&t){const l=t.value,a=e.find((e=>e==l));k.find((e=>e==l))&&e.length>1?s=e.filter((e=>e!=l)):a&&(s=[a]),k=s}a(s)};return B((()=>l.options),(()=>{(async()=>{const e=typeof l.options;y.value="function"==e?await l.options():l.options||[]})()}),{deep:!0,immediate:!0}),(t,l)=>{const a=A(n("uni-data-picker"),o),k=A(n("uni-easyinput"),R),S=C,D=N,x=A(n("uni-data-checkbox"),P),_=A(n("uv-checkbox"),j),V=A(n("uv-checkbox-group"),O);return c(),d(S,{class:"content"},{default:r((()=>["data-picker"==e.type?(c(),d(a,{key:0,readonly:"",class:"data-picker",localdata:y.value,modelValue:w(s),"onUpdate:modelValue":l[0]||(l[0]=e=>T(s)?s.value=e:null),"popup-title":e.placeholder,onChange:i,onNodeclick:u},null,8,["localdata","modelValue","popup-title"])):"year"==e.type?(c(),d(S,{key:1,class:"form-picker"},{default:r((()=>[g(D,{onChange:f,value:h.value,range:y.value},{default:r((()=>[g(S,{class:"year"},{default:r((()=>[g(k,{suffixIcon:"bottom",modelValue:w(s),"onUpdate:modelValue":l[1]||(l[1]=e=>T(s)?s.value=e:null),placeholder:e.placeholder},null,8,["modelValue","placeholder"])])),_:1})])),_:1},8,["value","range"])])),_:1})):"radio"==e.type?(c(),d(S,{key:2,class:"radio"},{default:r((()=>[g(x,{modelValue:w(s),"onUpdate:modelValue":l[2]||(l[2]=e=>T(s)?s.value=e:null),localdata:y.value},null,8,["modelValue","localdata"])])),_:1})):"checkbox"==e.type?(c(),d(S,{key:3},{default:r((()=>[g(x,{modelValue:w(s),"onUpdate:modelValue":l[3]||(l[3]=e=>T(s)?s.value=e:null),multiple:"",localdata:y.value},null,8,["modelValue","localdata"])])),_:1})):"checkbox-group"==e.type?(c(),d(S,{key:4,class:"checkbox-group"},{default:r((()=>[g(V,{modelValue:w(s),"onUpdate:modelValue":l[4]||(l[4]=e=>T(s)?s.value=e:null),placement:"column",size:"20px",labelSize:"32rpx",iconSize:16,iconPlacement:"left"},{default:r((()=>[(c(!0),p(m,null,b(y.value,((e,l)=>(c(),p(m,{key:l},[g(_,{customStyle:{margin:"14rpx "},label:e.text,name:e.value},null,8,["label","name"]),e.slot&&w(s).some((t=>t==e.value))?$(t.$slots,e.slot,{key:0},void 0,!0):v("",!0)],64)))),128))])),_:3},8,["modelValue"])])),_:3})):"textarea"==e.type?(c(),d(S,{key:5,class:"textarea"},{default:r((()=>[g(k,{autoHeight:"",modelValue:w(s),"onUpdate:modelValue":l[5]||(l[5]=e=>T(s)?s.value=e:null),placeholder:e.placeholder,type:"textarea"},null,8,["modelValue","placeholder"])])),_:1})):"value"==e.type?(c(),d(S,{key:6,class:"value"},{default:r((()=>[g(k,{readonly:"",modelValue:w(s),"onUpdate:modelValue":l[6]||(l[6]=e=>T(s)?s.value=e:null),placeholder:e.placeholder},null,8,["modelValue","placeholder"])])),_:1})):(c(),d(k,{key:7,type:e.type,modelValue:w(s),"onUpdate:modelValue":l[7]||(l[7]=e=>T(s)?s.value=e:null),placeholder:e.placeholder},null,8,["type","modelValue","placeholder"])),$(t.$slots,"default",{},void 0,!0)])),_:3})}}},[["__scopeId","data-v-b38515e2"]]);export{M as h};
