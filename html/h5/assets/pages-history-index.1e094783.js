import{r as a,h as t,E as e,G as s,o,g as m,b as r,a as i,w as n,F as u,k as c,f as l,q as d,n as p}from"./index-f9923a45.js";import{_ as v}from"./uv-navbar.85ff6eac.js";import{_ as b,a as y,r as _}from"./uni-app.es.05b2e329.js";import{_ as f,a as h,b as j}from"./uv-empty.026f408d.js";import{h as k,a as x,d as g}from"./baseApi.9064515e.js";import{_ as I,o as N}from"./lodash.cd6eed32.js";import{d as w}from"./dayjs.min.16297c83.js";import{a as T}from"./info.26db5737.js";import"./uv-icon.5bb898f1.js";import"./uni-icons.8cc73f7f.js";const Y=b({__name:"index",setup(b){const Y=a(t("userInfo")||null),A=Y.value?Y.value.communityId:"",B=Y.value?Y.value.communityName:"",C=a([]);y((()=>{D()}));const D=async()=>{e(),Promise.all([k({communityId:A}),x({communityId:A}),g({communityId:A})]).then((a=>{const t=a[1].data.filter((a=>a.communityId==A)).map((a=>({...a,prop:"area"})));let e=[...a[0].data.map((a=>({...a,prop:"city"}))),...t,...a[2].data.filter((a=>"1"==a.problemState)).map((a=>({...a,court_name:a.courtName+"-"+a.buildNumber,prop:"build"})))];e=e.map((a=>{var t;let e=a.state;const s=a.hasOwnProperty("management");return s||(a.state="0"==e?"1":e),{...a,dateTime:w(a.dateTime).format("YYYY-MM-DD HH:mm:ss"),court_name:a.court_name?a.court_name:s?a.courtName:B,court_vis_name:a.court_name?a.court_name:s?"小区-"+a.courtName:"社区-"+B,state_name:(null==(t=T.find((t=>t.value==a.state)))?void 0:t.text)||""}})),C.value=I.orderBy(e,["state","dateTime"],["asc","desc"]),s()}))};return(a,t)=>{const e=_(l("uv-navbar"),v),s=_(l("uni-list-item"),f),b=_(l("uni-list"),h),y=_(l("uv-empty"),j);return o(),m(u,null,[r(e,{title:"填报列表",border:"",leftIconSize:"50rpx",placeholder:"",autoBack:""}),C.value.length?(o(),i(b,{key:0,"border-full":""},{default:n((()=>[(o(!0),m(u,null,c(C.value,(a=>(o(),i(s,{clickable:"",onClick:t=>(a=>{const t={state:a.state,communityId:a.communityId,courtName:a.court_name};let e="";switch(a.prop){case"city":e="/pages/city/index";break;case"area":e="/pages/area/index";break;case"build":t.buildNumber=a.buildNumber,t.courtName=a.courtName,e="/pages/build/index"}p({url:e+"?"+N(t)})})(a),class:d("item-state"+a.state),rightText:a.state_name,key:a.id,title:a.court_vis_name,showArrow:"",note:a.dateTime},null,8,["onClick","class","rightText","title","note"])))),128))])),_:1})):(o(),i(y,{key:1,text:"暂无填报列表",mode:"data",icon:"https://cdn.uviewui.com/uview/empty/data.png"}))],64)}}},[["__scopeId","data-v-d23b2ca2"]]);export{Y as default};
