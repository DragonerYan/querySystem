import{r as e,o as a,g as r,b as s,w as l,F as o,h as u,i as d,d as t,f as n}from"./index-f9923a45.js";import{_ as m}from"./uv-navbar.85ff6eac.js";import{_ as i,r as p}from"./uni-app.es.05b2e329.js";import{a as f,_ as c,b as v}from"./uni-forms.921cd8d3.js";import{_ as w}from"./uni-card.a4063fa8.js";import{_}from"./uv-button.aa73ea60.js";import{u as b}from"./baseApi.9064515e.js";import{t as V}from"./toast.d3db215c.js";import"./uv-icon.5bb898f1.js";import"./uni-icons.8cc73f7f.js";import"./lodash.cd6eed32.js";const h=i({__name:"set",setup(i){const h=e({userName:(u("userInfo")||{}).userName||"",oldPassword:"",password:"",confirmPassword:""}),j=e(null);let P=!1;const g=e=>{P||(P=!0,j.value.validate().then((e=>{const a={...h.value};delete a.confirmPassword,b(a).then((()=>{V("修改成功")})),P=!1})).catch((e=>{P=!1,console.log("表单错误信息：",e)})))},q={userName:{rules:[{required:!0,errorMessage:"请输入用户名"}]},oldPassword:{rules:[{required:!0,errorMessage:"请输入旧密码"}]},password:{rules:[{required:!0,errorMessage:"请输入新密码"}]},confirmPassword:{rules:[{required:!0,errorMessage:"请确认新密码"},{validateFunction:function(e,a,r,s){if(a==h.value.password)return!0;s("两个密码不相同")}}]}};return(e,u)=>{const i=p(n("uv-navbar"),m),b=p(n("uni-easyinput"),f),V=p(n("uni-forms-item"),c),P=p(n("uni-forms"),v),y=p(n("uni-card"),w),N=p(n("uv-button"),_),x=d;return a(),r(o,null,[s(i,{title:"修改密码",border:"",leftIconSize:"50rpx",placeholder:"",autoBack:""}),s(y,null,{default:l((()=>[s(P,{ref_key:"formRef",ref:j,modelValue:h.value,"label-width":"150rpx",rules:q,style:{padding:"32rpx 0 0"}},{default:l((()=>[s(V,{required:"",label:"用户名",name:"userName"},{default:l((()=>[s(b,{modelValue:h.value.userName,"onUpdate:modelValue":u[0]||(u[0]=e=>h.value.userName=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),s(V,{required:"",label:"旧密码",name:"oldPassword"},{default:l((()=>[s(b,{modelValue:h.value.oldPassword,"onUpdate:modelValue":u[1]||(u[1]=e=>h.value.oldPassword=e),type:"password",placeholder:"请输入旧密码"},null,8,["modelValue"])])),_:1}),s(V,{required:"",label:"新密码",name:"password"},{default:l((()=>[s(b,{type:"password",modelValue:h.value.password,"onUpdate:modelValue":u[2]||(u[2]=e=>h.value.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),s(V,{required:"",label:"确认密码",name:"confirmPassword"},{default:l((()=>[s(b,{type:"password",modelValue:h.value.confirmPassword,"onUpdate:modelValue":u[3]||(u[3]=e=>h.value.confirmPassword=e),placeholder:"请确认密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(x,{class:"btns"},{default:l((()=>[s(N,{type:"primary",onClick:g},{default:l((()=>[t(" 修改密码 ")])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-dedfbb5a"]]);export{h as default};
