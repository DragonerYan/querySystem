import{r as a,g as t,D as e,E as s,o,f as m,a as r,c as i,w as n,F as u,j as c,e as l,p as d,n as p}from"./index-7772774a.js";import{_ as v}from"./uv-navbar.20d96e54.js";import{_ as y,a as _,r as b}from"./uni-app.es.46eca8e8.js";import{_ as f,a as j,b as h}from"./uv-empty.5b2a9a67.js";import{h as x,a as g,d as k}from"./baseApi.6d460e5e.js";import{_ as I,o as N}from"./lodash.dd7c9b8c.js";import{d as w}from"./dayjs.min.44fc3a7d.js";import{a as T}from"./info.26db5737.js";import"./uv-icon.748af6f6.js";import"./uni-icons.403c191f.js";const Y=y({__name:"index",setup(y){const Y=a(t("userInfo")||null),D=Y.value?Y.value.communityId:"",A=Y.value?Y.value.communityName:"",B=a([]);_((()=>{C()}));const C=async()=>{e(),Promise.all([x({communityId:D}),g({communityId:D}),k({communityId:D})]).then((a=>{const t=a[1].data.filter((a=>a.communityId==D)).map((a=>({...a,prop:"area"})));let e=[...a[0].data.map((a=>({...a,prop:"city"}))),...t,...a[2].data.filter((a=>"1"==a.problemState)).map((a=>({...a,court_name:a.courtName+"-"+a.buildNumber,prop:"build"})))];e=e.map((a=>{var t;let e=a.state;const s=a.hasOwnProperty("management");return s||(a.state="0"==e?"1":e),{...a,dateTime:w(a.dateTime).format("YYYY-MM-DD HH:mm:ss"),court_name:a.court_name?a.court_name:s?a.courtName:A,court_vis_name:a.court_name?a.court_name:s?"小区-"+a.courtName:"社区-"+A,state_name:(null==(t=T.find((t=>t.value==a.state)))?void 0:t.text)||""}})),B.value=I.orderBy(e,["state","dateTime"],["asc","desc"]),s()}))};return(a,t)=>{const e=b(l("uv-navbar"),v),s=b(l("uni-list-item"),f),y=b(l("uni-list"),j),_=b(l("uv-empty"),h);return o(),m(u,null,[r(e,{title:"填报列表",border:"",leftIconSize:"50rpx",placeholder:"",autoBack:""}),B.value.length?(o(),i(y,{key:0,"border-full":""},{default:n((()=>[(o(!0),m(u,null,c(B.value,(a=>(o(),i(s,{clickable:"",onClick:t=>(a=>{const t={state:a.state,communityId:a.communityId,courtName:a.court_name};let e="";switch(a.prop){case"city":e="/pages/city/index";break;case"area":e="/pages/area/index";break;case"build":t.buildNumber=a.buildNumber,t.courtName=a.courtName,e="/pages/build/index"}p({url:e+"?"+N(t)})})(a),class:d("item-state"+a.state),rightText:a.state_name,key:a.id,title:a.court_vis_name,showArrow:"",note:a.dateTime},null,8,["onClick","class","rightText","title","note"])))),128))])),_:1})):(o(),i(_,{key:1,text:"暂无填报列表",mode:"data",icon:"https://cdn.uviewui.com/uview/empty/data.png"}))],64)}}},[["__scopeId","data-v-d23b2ca2"]]);export{Y as default};
