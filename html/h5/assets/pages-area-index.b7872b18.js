import{o as e,c as a,w as l,a as o,q as n,C as t,E as i,b as r,A as u,p as d,i as m,k as s,e as c,G as f,u as p,j as V,v as _,n as b,r as v,g,t as h,x as y,H as q,f as U,F as k,I as F,s as x,h as j,y as M,J as C,d as S}from"./index-3120331b.js";import{_ as I}from"./uv-navbar.d68dac94.js";import{_ as w,r as N,o as z,a as T}from"./uni-app.es.25f5d80b.js";import{_ as A,s as P,e as Y,c as H,d as O,p as $,f as D,g as B,i as E,j as J,k as G,l as L,n as R,o as K,a as Q,b as W,q as X}from"./info.034e24bb.js";import{_ as Z,a as ee,b as ae}from"./uni-forms.7a774e89.js";import{t as le,_ as oe}from"./toast.249a26b0.js";import{_ as ne}from"./uni-card.969fd93b.js";import{_ as te}from"./uni-icons.0b93f177.js";import{o as ie,_ as re,d as ue,i as de,h as me,f as se}from"./baseApi.6213607f.js";import{d as ce}from"./dayjs.min.b2c80d6d.js";import"./uv-icon.e9900608.js";import"./uni-cloud.es.837cc618.js";const fe=w({name:"UniSection",emits:["click"],props:{type:{type:String,default:""},title:{type:String,required:!0,default:""},titleFontSize:{type:String,default:"14px"},titleColor:{type:String,default:"#333"},subTitle:{type:String,default:""},subTitleFontSize:{type:String,default:"12px"},subTitleColor:{type:String,default:"#999"},padding:{type:[Boolean,String],default:!1}},computed:{_padding(){return"string"==typeof this.padding?this.padding:this.padding?"10px":""}},watch:{title(e){uni.report&&""!==e&&uni.report("title",e)}},methods:{onClick(){this.$emit("click")}}},[["render",function(c,f,p,V,_,b){const v=m,g=s;return e(),a(v,{class:"uni-section"},{default:l((()=>[o(v,{class:"uni-section-header",onClick:b.onClick},{default:l((()=>[p.type?(e(),a(v,{key:0,class:n(["uni-section-header__decoration",p.type])},null,8,["class"])):t(c.$slots,"decoration",{key:1},void 0,!0),o(v,{class:"uni-section-header__content"},{default:l((()=>[o(g,{style:i({"font-size":p.titleFontSize,color:p.titleColor}),class:n(["uni-section__content-title",{distraction:!p.subTitle}])},{default:l((()=>[r(u(p.title),1)])),_:1},8,["style","class"]),p.subTitle?(e(),a(g,{key:0,style:i({"font-size":p.subTitleFontSize,color:p.subTitleColor}),class:"uni-section-header__content-sub"},{default:l((()=>[r(u(p.subTitle),1)])),_:1},8,["style"])):d("",!0)])),_:1}),o(v,{class:"uni-section-header__slot-right"},{default:l((()=>[t(c.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["onClick"]),o(v,{class:"uni-section-content",style:i({padding:b._padding})},{default:l((()=>[t(c.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3})}],["__scopeId","data-v-0a8818d5"]]),pe={__name:"base",props:{form:{}},setup:n=>(t,i)=>{const d=s,f=N(c("uni-forms-item"),Z),p=N(c("uni-easyinput"),ee),V=N(c("uni-card"),ne),_=m;return e(),a(_,{class:"content"},{default:l((()=>[o(V,{isFull:!0},{default:l((()=>[o(f,{required:"",label:"行政社区名称",name:["basic","communityName"],rules:[{required:!0,errorMessage:"必填"}]},{default:l((()=>[o(d,null,{default:l((()=>[r(u(n.form.basic.communityName),1)])),_:1})])),_:1}),o(f,{required:"",label:"社区面积",name:["basic","area"],rules:[{required:!0,errorMessage:"必填"}]},{default:l((()=>[o(p,{modelValue:n.form.basic.area,"onUpdate:modelValue":i[0]||(i[0]=e=>n.form.basic.area=e),type:"number",placeholder:"请输入社区面积"},null,8,["modelValue"]),o(d,null,{default:l((()=>[r("公顷")])),_:1})])),_:1}),o(f,{required:"",label:"社区管辖范围内的小区数量",name:["basic","numberCourt"],rules:[{required:!0,errorMessage:"必填"}]},{default:l((()=>[o(p,{modelValue:n.form.basic.numberCourt,"onUpdate:modelValue":i[1]||(i[1]=e=>n.form.basic.numberCourt=e),type:"number",placeholder:"请输入社区管辖范围内的小区数量"},null,8,["modelValue"]),o(d,null,{default:l((()=>[r("个")])),_:1})])),_:1}),o(f,{required:"",label:"覆盖居民人数",name:["basic","numberPeople"],rules:[{required:!0,errorMessage:"必填"}]},{default:l((()=>[o(p,{modelValue:n.form.basic.numberPeople,"onUpdate:modelValue":i[2]||(i[2]=e=>n.form.basic.numberPeople=e),type:"number",placeholder:"请输入覆盖居民人数"},null,8,["modelValue"]),o(d,null,{default:l((()=>[r("人")])),_:1})])),_:1}),o(f,{required:"",label:"覆盖居民户数",name:["basic","numberFamily"],rules:[{required:!0,errorMessage:"必填"}]},{default:l((()=>[o(p,{modelValue:n.form.basic.numberFamily,"onUpdate:modelValue":i[3]||(i[3]=e=>n.form.basic.numberFamily=e),type:"number",placeholder:"请输入覆盖居民户数"},null,8,["modelValue"]),o(d,null,{default:l((()=>[r("户")])),_:1})])),_:1})])),_:1})])),_:1})}},Ve=w({__name:"environment",props:{form:{}},setup(n){const t=n,i=f({"3.2.7.1":[{required:!0,errorMessage:"必选,必填"},{validateFunction:function(e,a,l,o){let n=[];return t.form.environment["3.2.7.1.1"].indicatorValue||n.push("用地面积(合计)必填"),n.length>0&&o(n.join(";")),!0}}],"3.2.7.2":[{required:!0,errorMessage:"必选,必填"},{validateFunction:function(e,a,l,o){let n=[];return t.form.environment["3.2.7.2.1"].indicatorValue||n.push("用地面积必填"),n.length>0&&o(n.join(";")),!0}}],babyServerArea:[{required:!0,errorMessage:"必选,必填"},{validateFunction:function(e,a,l,o){let n=[];return t.form.environment["3.1.2.2.1"].indicatorValue||n.push("建造面积必填"),n.length>0&&o(n.join(";")),!0}}]});return(t,u)=>{const d=N(c("uni-data-checkbox"),A),f=N(c("uni-easyinput"),ee),b=s,v=N(c("uni-forms-item"),Z),g=m,h=N(c("uni-card"),ne);return e(),a(g,{class:"content"},{default:l((()=>[o(h,{title:"公共活动场地",isFull:!0},{default:l((()=>[o(v,{label:"社区公共活动场地面积是否达标（既有社区，用地面积不小于150平方米。新建社区，用地面积不小于800平方米）",required:"",name:["environment","3.2.7.1","indicatorValue"],rules:i["3.2.7.1"]},{default:l((()=>[o(g,null,{default:l((()=>[o(d,{modelValue:n.form.environment["3.2.7.1"].indicatorValue,"onUpdate:modelValue":u[0]||(u[0]=e=>n.form.environment["3.2.7.1"].indicatorValue=e),localdata:p(P)},null,8,["modelValue","localdata"]),o(v,{class:"child-forms-item",label:"用地面积(合计)"},{default:l((()=>[o(f,{modelValue:n.form.environment["3.2.7.1.1"].indicatorValue,"onUpdate:modelValue":u[1]||(u[1]=e=>n.form.environment["3.2.7.1.1"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("平方米")])),_:1})])),_:1})])),_:1})])),_:1},8,["name","rules"]),o(v,{label:"公共绿地面积是否达标（既有社区至少有一片公共活动场地。新建社区，用地面积不小于4000平方米）",required:"",name:["environment","3.2.7.2","indicatorValue"],rules:i["3.2.7.2"]},{default:l((()=>[o(g,null,{default:l((()=>[o(d,{modelValue:n.form.environment["3.2.7.2"].indicatorValue,"onUpdate:modelValue":u[2]||(u[2]=e=>n.form.environment["3.2.7.2"].indicatorValue=e),localdata:p(P)},null,8,["modelValue","localdata"]),o(v,{class:"child-forms-item",label:"用地面积"},{default:l((()=>[o(f,{modelValue:n.form.environment["3.2.7.2.1"].indicatorValue,"onUpdate:modelValue":u[3]||(u[3]=e=>n.form.environment["3.2.7.2.1"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("平方米")])),_:1})])),_:1})])),_:1})])),_:1},8,["name","rules"]),o(v,{label:"存在哪些问题",required:"",class:"other_form_item",name:["environment","3.2.7.3","indicatorValue"]},{default:l((()=>[o(d,{modelValue:n.form.environment["3.2.7.3"].indicatorValue,"onUpdate:modelValue":u[4]||(u[4]=e=>n.form.environment["3.2.7.3"].indicatorValue=e),multiple:"",localdata:p(Y)},null,8,["modelValue","localdata"]),V(o(f,{modelValue:n.form.environment["3.2.7.3"].meno,"onUpdate:modelValue":u[5]||(u[5]=e=>n.form.environment["3.2.7.3"].meno=e),placeholder:"请输入其他"},null,8,["modelValue"]),[[_,n.form.environment["3.2.7.3"].indicatorValue.some((e=>"3.2.7.3.6"==e))]])])),_:1},8,["name"])])),_:1}),o(h,{style:{"margin-top":"20rpx"},title:"步行道",isFull:!0},{default:l((()=>[o(v,{label:"不达标的步行道长度",required:"",name:["environment","3.2.8.2","indicatorValue"],rules:[{required:!0,errorMessage:"必填"}]},{default:l((()=>[o(f,{modelValue:n.form.environment["3.2.8.2"].indicatorValue,"onUpdate:modelValue":u[6]||(u[6]=e=>n.form.environment["3.2.8.2"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("千米")])),_:1})])),_:1},8,["name"]),o(v,{class:"other_form_item",label:"存在哪些问题",name:["environment","3.2.8.1","indicatorValue"]},{default:l((()=>[o(d,{modelValue:n.form.environment["3.2.8.1"].indicatorValue,"onUpdate:modelValue":u[7]||(u[7]=e=>n.form.environment["3.2.8.1"].indicatorValue=e),multiple:"",localdata:p(H)},null,8,["modelValue","localdata"]),V(o(f,{modelValue:n.form.environment["3.2.8.1"].meno,"onUpdate:modelValue":u[8]||(u[8]=e=>n.form.environment["3.2.8.1"].meno=e),placeholder:"请输入其他"},null,8,["modelValue"]),[[_,n.form.environment["3.2.8.1"].indicatorValue.some((e=>"3.2.8.1.7"==e))]])])),_:1},8,["name"])])),_:1}),o(h,{style:{"margin-top":"20rpx"},title:"垃圾分类",isFull:!0},{default:l((()=>[o(v,{label:"未实施生活垃圾分类的小区数量",required:"",name:["environment","3.2.9.2","indicatorValue"],rules:[{required:!0,errorMessage:"必填"}]},{default:l((()=>[o(f,{modelValue:n.form.environment["3.2.9.2"].indicatorValue,"onUpdate:modelValue":u[9]||(u[9]=e=>n.form.environment["3.2.9.2"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("个")])),_:1})])),_:1},8,["name"]),o(v,{class:"other_form_item",label:"存在哪些问题",name:["environment","3.2.9.1","indicatorValue"]},{default:l((()=>[o(d,{modelValue:n.form.environment["3.2.9.1"].indicatorValue,"onUpdate:modelValue":u[10]||(u[10]=e=>n.form.environment["3.2.9.1"].indicatorValue=e),multiple:"",localdata:p(O)},null,8,["modelValue","localdata"]),V(o(f,{modelValue:n.form.environment["3.2.9.1"].meno,"onUpdate:modelValue":u[11]||(u[11]=e=>n.form.environment["3.2.9.1"].meno=e),placeholder:"请输入其他"},null,8,["modelValue"]),[[_,n.form.environment["3.2.9.1"].indicatorValue.some((e=>"3.2.9.1.3"==e))]])])),_:1},8,["name"])])),_:1})])),_:1})}}},[["__scopeId","data-v-eeb2fe5a"]]),_e={__name:"manage",props:{form:{}},setup:n=>(t,i)=>{const r=N(c("uni-data-checkbox"),A),u=N(c("uni-easyinput"),ee),d=N(c("uni-forms-item"),Z),s=N(c("uni-card"),ne),f=m;return e(),a(f,{class:"content"},{default:l((()=>[o(s,{title:"物业管理",isFull:!0},{default:l((()=>[o(d,{class:"other_form_item",label:"存在哪些问题",name:["manage","3.3.10.1","indicatorValue"]},{default:l((()=>[o(r,{modelValue:n.form.manage["3.3.10.1"].indicatorValue,"onUpdate:modelValue":i[0]||(i[0]=e=>n.form.manage["3.3.10.1"].indicatorValue=e),multiple:"",localdata:p($)},null,8,["modelValue","localdata"]),V(o(u,{modelValue:n.form.manage["3.3.10.1"].meno,"onUpdate:modelValue":i[1]||(i[1]=e=>n.form.manage["3.3.10.1"].meno=e),placeholder:"请输入其他"},null,8,["modelValue"]),[[_,n.form.manage["3.3.10.1"].indicatorValue.some((e=>"3.3.10.1.6"==e))]])])),_:1},8,["name"])])),_:1}),o(s,{style:{"margin-top":"20rpx"},title:"智慧化改造",isFull:!0},{default:l((()=>[o(d,{class:"other_form_item",label:"存在哪些问题",name:["manage","3.3.11.1","indicatorValue"]},{default:l((()=>[o(r,{modelValue:n.form.manage["3.3.11.1"].indicatorValue,"onUpdate:modelValue":i[2]||(i[2]=e=>n.form.manage["3.3.11.1"].indicatorValue=e),multiple:"",localdata:p(D)},null,8,["modelValue","localdata"]),V(o(u,{modelValue:n.form.manage["3.3.11.1"].meno,"onUpdate:modelValue":i[3]||(i[3]=e=>n.form.manage["3.3.11.1"].meno=e),placeholder:"请输入其他"},null,8,["modelValue"]),[[_,n.form.manage["3.3.11.1"].indicatorValue.some((e=>"3.3.11.1.3"==e))]])])),_:1},8,["name"]),o(d,{class:"other_form_item",label:"有条件的，查找差距和不足",name:["manage","3.3.11.2","indicatorValue"]},{default:l((()=>[o(r,{modelValue:n.form.manage["3.3.11.2"].indicatorValue,"onUpdate:modelValue":i[4]||(i[4]=e=>n.form.manage["3.3.11.2"].indicatorValue=e),multiple:"",localdata:p(B)},null,8,["modelValue","localdata"]),V(o(u,{modelValue:n.form.manage["3.3.11.2"].meno,"onUpdate:modelValue":i[5]||(i[5]=e=>n.form.manage["3.3.11.2"].meno=e),placeholder:"请输入其他"},null,8,["modelValue"]),[[_,n.form.manage["3.3.11.2"].indicatorValue.some((e=>"3.3.11.2.3"==e))]])])),_:1},8,["name"])])),_:1})])),_:1})}},be=w({__name:"pension",props:{form:{}},setup(n){const t=n,i=(e,a)=>{b({url:"/pages/home/map?"+ie({keyword:a,key:e})})},u=f({"3.1.3.2":[{required:!0,errorMessage:"必选,必填"},{validateFunction:function(e,a,l,o){const n=t.form;let i=[];return n.pension["3.1.3.2.1"].indicatorValue||i.push("建造面积必填"),n.pension["3.1.3.2.2"].indicatorValue||i.push("用地面积必填"),i.length>0&&o(i.join(";")),!0}}],"3.1.1.2":[{required:!0,errorMessage:"必选,必填"},{validateFunction:function(e,a,l,o){let n=[];return t.form.pension["3.1.1.2.1"].indicatorValue||n.push("建造面积必填"),n.length>0&&o(n.join(";")),!0}}],"3.1.2.2":[{required:!0,errorMessage:"必选,必填"},{validateFunction:function(e,a,l,o){let n=[];return t.form.pension["3.1.2.2.1"].indicatorValue||n.push("建造面积必填"),n.length>0&&o(n.join(";")),!0}}]});return(t,f)=>{const b=s,v=N(c("uni-icons"),te),g=m,h=N(c("uni-data-checkbox"),A),y=N(c("uni-forms-item"),Z),q=N(c("uni-easyinput"),ee),U=N(c("uni-card"),ne);return e(),a(g,{class:"content"},{default:l((()=>[o(U,{title:"社区养老服务设施",isFull:!0},{title:l((()=>[o(g,{class:"card-title"},{default:l((()=>[o(b,null,{default:l((()=>[r("社区养老服务设施")])),_:1}),o(v,{type:"location",size:"24",onClick:f[0]||(f[0]=e=>i("3.1.1","社区养老"))})])),_:1})])),default:l((()=>[o(y,{label:"是否配建",required:"",name:["pension","3.1.1.1","indicatorValue"],rules:[{required:!0,errorMessage:"必选"}]},{default:l((()=>[o(h,{modelValue:n.form.pension["3.1.1.1"].indicatorValue,"onUpdate:modelValue":f[1]||(f[1]=e=>n.form.pension["3.1.1.1"].indicatorValue=e),localdata:p(P)},null,8,["modelValue","localdata"])])),_:1},8,["name"]),o(y,{label:"面积是否达标（新建社区，建筑面积不小于350平方米）",required:"",name:["pension","3.1.1.2","indicatorValue"],rules:u["3.1.1.2"]},{default:l((()=>[o(g,null,{default:l((()=>[o(h,{modelValue:n.form.pension["3.1.1.2"].indicatorValue,"onUpdate:modelValue":f[2]||(f[2]=e=>n.form.pension["3.1.1.2"].indicatorValue=e),localdata:p(P)},null,8,["modelValue","localdata"]),o(y,{class:"child-forms-item",label:"建筑面积",name:["pension","3.1.1.2.1","indicatorValue"]},{default:l((()=>[o(q,{modelValue:n.form.pension["3.1.1.2.1"].indicatorValue,"onUpdate:modelValue":f[3]||(f[3]=e=>n.form.pension["3.1.1.2.1"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("平方米")])),_:1})])),_:1},8,["name"])])),_:1})])),_:1},8,["name","rules"]),o(y,{class:"other_form_item",label:"存在哪些问题",name:["pension","3.1.1.3","indicatorValue"]},{default:l((()=>[o(h,{modelValue:n.form.pension["3.1.1.3"].indicatorValue,"onUpdate:modelValue":f[4]||(f[4]=e=>n.form.pension["3.1.1.3"].indicatorValue=e),multiple:"",localdata:p(E)},null,8,["modelValue","localdata"]),V(o(q,{modelValue:n.form.pension["3.1.1.3"].meno,"onUpdate:modelValue":f[5]||(f[5]=e=>n.form.pension["3.1.1.3"].meno=e),placeholder:"请输入其他"},null,8,["modelValue"]),[[_,n.form.pension["3.1.1.3"].indicatorValue.some((e=>"3.1.1.3.6"==e))]])])),_:1},8,["name"])])),_:1}),o(U,{style:{"margin-top":"20rpx"},title:"婴幼儿照护服务设施",isFull:!0},{title:l((()=>[o(g,{class:"card-title"},{default:l((()=>[o(b,null,{default:l((()=>[r("婴幼儿照护服务设施")])),_:1}),o(v,{type:"location",size:"24",onClick:f[6]||(f[6]=e=>i("3.1.2","婴幼儿照护"))})])),_:1})])),default:l((()=>[o(y,{label:"是否配建",required:"",name:["pension","3.1.2.1","indicatorValue"],rules:[{required:!0,errorMessage:"必选"}]},{default:l((()=>[o(h,{modelValue:n.form.pension["3.1.2.1"].indicatorValue,"onUpdate:modelValue":f[7]||(f[7]=e=>n.form.pension["3.1.2.1"].indicatorValue=e),localdata:p(P)},null,8,["modelValue","localdata"])])),_:1},8,["name"]),o(y,{label:"面积是否达标（建筑面积不小于200平方米）",required:"",name:["pension","3.1.2.2","indicatorValue"],rules:u["3.1.2.2"]},{default:l((()=>[o(g,null,{default:l((()=>[o(h,{modelValue:n.form.pension["3.1.2.2"].indicatorValue,"onUpdate:modelValue":f[8]||(f[8]=e=>n.form.pension["3.1.2.2"].indicatorValue=e),localdata:p(P)},null,8,["modelValue","localdata"]),o(y,{class:"child-forms-item",label:"建筑面积",name:["pension","3.1.2.2.1","indicatorValue"]},{default:l((()=>[o(q,{modelValue:n.form.pension["3.1.2.2.1"].indicatorValue,"onUpdate:modelValue":f[9]||(f[9]=e=>n.form.pension["3.1.2.2.1"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("平方米")])),_:1})])),_:1},8,["name"])])),_:1})])),_:1},8,["name","rules"]),o(y,{label:"存在哪些问题",name:["pension","3.1.2.3","indicatorValue"]},{default:l((()=>[o(g,null,{default:l((()=>[o(h,{multiple:"",modelValue:n.form.pension["3.1.2.3"].indicatorValue,"onUpdate:modelValue":f[10]||(f[10]=e=>n.form.pension["3.1.2.3"].indicatorValue=e),localdata:p(J)},null,8,["modelValue","localdata"]),n.form.pension["3.1.2.3"].indicatorValue.some((e=>"1"==e))?(e(),a(y,{key:0,class:"child-forms-row",label:"具体问题",required:"",name:["pension","3.1.2.3.1","indicatorValue"],rules:[{required:!0,errorMessage:"具体问题必填"}]},{default:l((()=>[o(q,{autoHeight:"",modelValue:n.form.pension["3.1.2.3.1"].indicatorValue,"onUpdate:modelValue":f[11]||(f[11]=e=>n.form.pension["3.1.2.3.1"].indicatorValue=e),placeholder:"请输入具体问题",type:"textarea"},null,8,["modelValue"])])),_:1},8,["name"])):d("",!0)])),_:1})])),_:1},8,["name"])])),_:1}),o(U,{style:{"margin-top":"20rpx"},title:"幼儿园",isFull:!0},{title:l((()=>[o(g,{class:"card-title"},{default:l((()=>[o(b,null,{default:l((()=>[r("幼儿园")])),_:1}),o(v,{type:"location",size:"24",onClick:f[12]||(f[12]=e=>i("3.1.3","幼儿园"))})])),_:1})])),default:l((()=>[o(y,{label:"是否配建",required:"",name:["pension","3.1.3.1","indicatorValue"],rules:[{required:!0,errorMessage:"必选"}]},{default:l((()=>[o(h,{modelValue:n.form.pension["3.1.3.1"].indicatorValue,"onUpdate:modelValue":f[13]||(f[13]=e=>n.form.pension["3.1.3.1"].indicatorValue=e),localdata:p(P)},null,8,["modelValue","localdata"])])),_:1},8,["name"]),o(y,{label:"面积是否达标（建筑面积不小于2200平方米，用地面积不小于3500平方米）",required:"",name:["pension","3.1.3.2","indicatorValue"],rules:u["3.1.3.2"]},{default:l((()=>[o(g,null,{default:l((()=>[o(h,{modelValue:n.form.pension["3.1.3.2"].indicatorValue,"onUpdate:modelValue":f[14]||(f[14]=e=>n.form.pension["3.1.3.2"].indicatorValue=e),localdata:p(P)},null,8,["modelValue","localdata"]),o(y,{class:"child-forms-item",label:"建筑面积",name:["pension","3.1.3.2.1","indicatorValue"]},{default:l((()=>[o(q,{modelValue:n.form.pension["3.1.3.2.1"].indicatorValue,"onUpdate:modelValue":f[15]||(f[15]=e=>n.form.pension["3.1.3.2.1"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("平方米")])),_:1})])),_:1},8,["name"]),o(y,{class:"child-forms-item",label:"用地面积",name:["pension","3.1.3.2.2","indicatorValue"]},{default:l((()=>[o(q,{modelValue:n.form.pension["3.1.3.2.2"].indicatorValue,"onUpdate:modelValue":f[16]||(f[16]=e=>n.form.pension["3.1.3.2.2"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("平方米")])),_:1})])),_:1},8,["name"])])),_:1})])),_:1},8,["name","rules"]),o(y,{label:"存在哪些问题",name:["pension","3.1.3.3","indicatorValue"]},{default:l((()=>[o(g,null,{default:l((()=>[o(h,{multiple:"",modelValue:n.form.pension["3.1.3.3"].indicatorValue,"onUpdate:modelValue":f[17]||(f[17]=e=>n.form.pension["3.1.3.3"].indicatorValue=e),localdata:p(G)},null,8,["modelValue","localdata"]),n.form.pension["3.1.3.3"].indicatorValue.some((e=>"1"==e))?(e(),a(y,{key:0,label:"具体问题",class:"child-forms-row",required:"",name:["pension","3.1.3.3.1","indicatorValue"],rules:[{required:!0,errorMessage:"具体问题必填"}]},{default:l((()=>[o(q,{autoHeight:"",modelValue:n.form.pension["3.1.3.3.1"].indicatorValue,"onUpdate:modelValue":f[18]||(f[18]=e=>n.form.pension["3.1.3.3.1"].indicatorValue=e),placeholder:"请输入具体问题",type:"textarea"},null,8,["modelValue"])])),_:1},8,["name"])):d("",!0)])),_:1})])),_:1},8,["name"])])),_:1}),o(U,{style:{"margin-top":"20rpx"},title:"小学学位",isFull:!0},{title:l((()=>[o(g,{class:"card-title"},{default:l((()=>[o(b,null,{default:l((()=>[r("小学")])),_:1}),o(v,{type:"location",size:"24",onClick:f[19]||(f[19]=e=>i("3.1.4","小学"))})])),_:1})])),default:l((()=>[o(y,{label:"小学学位",required:"",name:["pension","3.1.4.1","indicatorValue"],rules:[{required:!0,errorMessage:"必选"}]},{default:l((()=>[o(b,null,{default:l((()=>[r("缺口数:")])),_:1}),o(q,{modelValue:n.form.pension["3.1.4.1"].indicatorValue,"onUpdate:modelValue":f[20]||(f[20]=e=>n.form.pension["3.1.4.1"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("个")])),_:1})])),_:1},8,["name"])])),_:1}),o(U,{style:{"margin-top":"20rpx"},title:"停车泊位",isFull:!0},{default:l((()=>[o(y,{label:"停车泊位",required:"",name:["pension","3.1.5.1","indicatorValue"],rules:[{required:!0,errorMessage:"必选"}]},{default:l((()=>[o(b,null,{default:l((()=>[r("缺口数:")])),_:1}),o(q,{modelValue:n.form.pension["3.1.5.1"].indicatorValue,"onUpdate:modelValue":f[21]||(f[21]=e=>n.form.pension["3.1.5.1"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("个")])),_:1})])),_:1},8,["name"]),o(y,{class:"other_form_item",label:"存在哪些问题",name:["pension","3.1.5.2","indicatorValue"]},{default:l((()=>[o(h,{modelValue:n.form.pension["3.1.5.2"].indicatorValue,"onUpdate:modelValue":f[22]||(f[22]=e=>n.form.pension["3.1.5.2"].indicatorValue=e),multiple:"",localdata:p(L)},null,8,["modelValue","localdata"]),V(o(q,{modelValue:n.form.pension["3.1.5.2"].meno,"onUpdate:modelValue":f[23]||(f[23]=e=>n.form.pension["3.1.5.2"].meno=e),placeholder:"请输入其他"},null,8,["modelValue"]),[[_,n.form.pension["3.1.5.2"].indicatorValue.some((e=>"3.1.5.2.2"==e))]])])),_:1},8,["name"])])),_:1}),o(U,{style:{"margin-top":"20rpx"},title:"新能源汽车充电桩",isFull:!0},{default:l((()=>[o(y,{label:"充电桩",required:"",name:["pension","3.1.6.1","indicatorValue"],rules:[{required:!0,errorMessage:"必选"}]},{default:l((()=>[o(b,null,{default:l((()=>[r("充电桩缺口数:")])),_:1}),o(q,{modelValue:n.form.pension["3.1.6.1"].indicatorValue,"onUpdate:modelValue":f[24]||(f[24]=e=>n.form.pension["3.1.6.1"].indicatorValue=e),type:"number",placeholder:"请输入"},null,8,["modelValue"]),o(b,null,{default:l((()=>[r("个")])),_:1})])),_:1},8,["name"]),o(y,{class:"other_form_item",label:"存在哪些问题",name:["pension","3.1.6.2","indicatorValue"]},{default:l((()=>[o(g,null,{default:l((()=>[o(h,{modelValue:n.form.pension["3.1.6.2"].indicatorValue,"onUpdate:modelValue":f[25]||(f[25]=e=>n.form.pension["3.1.6.2"].indicatorValue=e),multiple:"",localdata:p(R)},null,8,["modelValue","localdata"]),n.form.pension["3.1.6.2"].indicatorValue.some((e=>"1"==e))?(e(),a(y,{key:0,label:"具体问题",class:"child-forms-row",required:"",name:["pension","3.1.6.2.1","indicatorValue"],rules:[{required:!0,errorMessage:"具体问题必填"}]},{default:l((()=>[o(q,{autoHeight:"",modelValue:n.form.pension["3.1.6.2.1"].indicatorValue,"onUpdate:modelValue":f[26]||(f[26]=e=>n.form.pension["3.1.6.2.1"].indicatorValue=e),placeholder:"请输入具体问题",type:"textarea"},null,8,["modelValue"])])),_:1},8,["name"])):d("",!0)])),_:1})])),_:1},8,["name"])])),_:1})])),_:1})}}},[["__scopeId","data-v-d8629216"]]),ve=w({__name:"index",props:{state:String,communityId:String,courtName:String,storage:String},setup(t){const i=v(g("userInfo")||null),s=v("社区填报"),f=v(0),p=["基本信息","体检指标"],b=v(""),w=i.value?i.value.communityId:"",A=i.value?i.value.communityName:"",P=v(null),Y=e=>{f.value=e},H=(e="")=>({communityId:w,courtName:"",indicatorId:"",indicatorValue:e,latitude:0,longitude:0,meno:"",reportYear:""});z((e=>{if(e.state){switch(e.state){case"0":s.value="小区暂存填报-"+e.courtName;break;case"1":s.value=e.courtName+"-待审核";break;case"2":s.value=e.courtName+"-审核通过";break;case"3":s.value=e.courtName+"-审核未通过"}b.value=e.state,$(e.communityId)}else if(e.storage){const a=g(e.storage);D.value=re.assign(D.value,a[w])}})),T((()=>{const e=g("location");e&&O(e)}));const O=(e={})=>{for(let a in e)D.value.map.hasOwnProperty(a)&&(D.value.map[a].latitude=e[a].latitude,D.value.map[a].longitude=e[a].longitude,D.value.map[a].indicatorValue=1)},$=async(e,a="")=>{h();const l={communityId:e,courtName:a},o=await ue(l);let{basicInfo:n,indicatorValueList:t}=o.data;n=de(n),D.value.basic=re.assign(D.value.basic,n);const i={...D.value.pension,...D.value.environment,...D.value.manage,...D.value.map};for(let r in i){const e=t.find((e=>e.indicatorId==r));if(e)if(Array.isArray(i[r].indicatorValue))if(K.hasOwnProperty(r))e.indicatorValue+="",i[r].indicatorValue=e.indicatorValue.split(";");else{const a=e.meno.split(";");if(a.length){const e=t.find((e=>e.indicatorId==a[a.length-1]));e&&e.meno&&(i[r].meno=e.meno)}i[r].indicatorValue=a}else i[r].indicatorValue=e.indicatorValue+"",i[r].latitude=e.latitude,i[r].location=e.location}y()},D=v((()=>{const e={"3.1.1.1":H(),"3.1.1.2":H(),"3.1.1.2.1":H(),"3.1.1.3":H([]),"3.1.2.1":H(),"3.1.2.2":H(),"3.1.2.2.1":H(),"3.1.2.3":H([]),"3.1.2.3.1":H(),"3.1.3.1":H(),"3.1.3.2":H(),"3.1.3.2.1":H(),"3.1.3.2.2":H(),"3.1.3.3":H([]),"3.1.3.3.1":H(),"3.1.4.1":H(),"3.1.5.1":H(),"3.1.5.2":H([]),"3.1.6.1":H(),"3.1.6.2":H([]),"3.1.6.2.1":H()},a={"3.2.7.1":H(),"3.2.7.1.1":H(),"3.2.7.2":H(),"3.2.7.2.1":H(),"3.2.7.3":H([]),"3.2.8.1":H([]),"3.2.8.2":H(""),"3.2.9.1":H([]),"3.2.9.2":H("")},l={"3.3.10.1":H([]),"3.3.11.1":H([]),"3.3.11.2":H([])},o={"3.1.1":H(),"3.1.2":H(),"3.1.3":H(),"3.1.4":H()};return{basic:{area:"",communityId:w,communityName:A,dateTime:"",courtName:"",numberCourt:"",numberFamily:"",numberPeople:"",reportYear:"",reviewComment:""},pension:e,environment:a,manage:l,map:o}})());q((()=>D),(e=>{const a=g("areaForm")||{};w&&(a[w]=e.value,x("areaForm",a))}),{deep:!0});const B=async(e=1)=>{h();const a=ce().year(),l={...D.value.basic,dateTime:new Date,state:e,reportYear:a};await me(l);const o=[],n=re.cloneDeep({...D.value.pension,...D.value.environment,...D.value.manage,...D.value.map});for(var t in n){const e=n[t];if(e.indicatorId=t,e.reportYear=a,Array.isArray(e.indicatorValue)){const l=e.meno,i=re.cloneDeep(e.indicatorValue);if(K.hasOwnProperty(t))for(let a in K)a==t&&(e.indicatorValue=e.indicatorValue.join(";"),e.indicatorValue||(n[K[t]].indicatorValue=""));else{if(i.length){e.indicatorValue=1;const n=X[t];n.forEach(((e,t)=>{const r=i.find((a=>a==e.value)),u=H();u.indicatorId=e.value,u.reportYear=a,r?(u.indicatorValue=1,t==n.length-1&&(u.meno=l)):u.indicatorValue=0,o.push(u)}))}else e.indicatorValue=0;e.meno=i.join(";")}}o.push(e)}await se(o),y(),M({title:"提交成功",duration:2e3,icon:"none"});const i=g("areaForm");delete i[w],"{}"===JSON.stringify(i)?C("areaForm"):x("areaForm",i),setTimeout((()=>{S({url:"/pages/home/index"})}),800)};return(t,i)=>{const v=N(c("uv-navbar"),I),g=N(c("uni-notice-bar"),Q),h=N(c("z-tabs"),W),y=N(c("uni-section"),fe),q=N(c("uni-forms"),ae),x=N(c("uv-button"),oe),M=m;return e(),U(k,null,[o(v,{title:s.value,border:"",leftIconSize:"50rpx",placeholder:"",autoBack:""},null,8,["title"]),o(M,null,{default:l((()=>["3"===b.value?(e(),a(g,{key:0,text:"审核不通过意见："+D.value.basic.reviewComment},null,8,["text"])):d("",!0),o(h,{list:p,onChange:Y}),o(M,{class:n(["form-box",{mask:"1"==b.value||"2"==b.value}])},{default:l((()=>[o(q,{modelValue:D.value,"label-position":"top","label-width":"100%",class:"form",ref_key:"formRef",ref:P},{default:l((()=>[V(o(pe,{form:D.value},null,8,["form"]),[[_,0==f.value]]),V(F("div",null,[o(y,{class:"section-title",title:"设施完善"},{default:l((()=>[o(be,{form:D.value},null,8,["form"])])),_:1}),o(y,{class:"section-title",title:"环境宜居"},{default:l((()=>[o(Ve,{form:D.value},null,8,["form"])])),_:1}),o(y,{class:"section-title",title:"管理健全"},{default:l((()=>[o(_e,{form:D.value},null,8,["form"])])),_:1})],512),[[_,1==f.value]])])),_:1},8,["modelValue"]),o(M,{class:"btns"},{default:l((()=>[o(x,{class:"submit",type:"primary",onClick:i[0]||(i[0]=e=>{P.value.validate().then((e=>{j({title:"提交",content:"一旦提交不可修改,确定提交？",success:e=>{e.confirm?B():e.cancel&&console.log("用户点击了取消")}})})).catch((e=>{le("请填写完整")}))})},{default:l((()=>[r(u("4"==b.value?"重新提交":"提交"),1)])),_:1})])),_:1})])),_:1},8,["class"])])),_:1})],64)}}},[["__scopeId","data-v-c1a750b1"]]);export{ve as default};
