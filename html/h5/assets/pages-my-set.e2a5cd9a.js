import{r as e,o as a,f as r,a as s,w as l,F as o,g as u,i as d,b as t,e as n}from"./index-ea6544a4.js";import{_ as m}from"./uv-navbar.17c0f169.js";import{_ as i,r as p}from"./uni-app.es.39bc03e5.js";import{a as f,_ as c,b as w}from"./uni-forms.1536f03d.js";import{_ as v}from"./uni-card.a47d36c5.js";import{t as _,_ as b}from"./toast.0c1427b2.js";import{u as V}from"./baseApi.90e84e1c.js";import"./uv-icon.7381eece.js";import"./uni-icons.6b4a5a2f.js";const P=i({__name:"set",setup(i){const P=e({userName:(u("userInfo")||{}).userName||"",oldPassword:"",password:"",confirmPassword:""}),j=e(null);let h=!1;const g=e=>{h||(h=!0,j.value.validate().then((e=>{const a={...P.value};delete a.confirmPassword,V(a).then((()=>{_("修改成功")})),h=!1})).catch((e=>{h=!1,console.log("表单错误信息：",e)})))},q={userName:{rules:[{required:!0,errorMessage:"请输入用户名"}]},oldPassword:{rules:[{required:!0,errorMessage:"请输入旧密码"}]},password:{rules:[{required:!0,errorMessage:"请输入新密码"}]},confirmPassword:{rules:[{required:!0,errorMessage:"请确认新密码"},{validateFunction:function(e,a,r,s){if(a==P.value.password)return!0;s("两个密码不相同")}}]}};return(e,u)=>{const i=p(n("uv-navbar"),m),_=p(n("uni-easyinput"),f),V=p(n("uni-forms-item"),c),h=p(n("uni-forms"),w),y=p(n("uni-card"),v),N=p(n("uv-button"),b),x=d;return a(),r(o,null,[s(i,{title:"修改密码",border:"",leftIconSize:"50rpx",placeholder:"",autoBack:""}),s(y,null,{default:l((()=>[s(h,{ref_key:"formRef",ref:j,modelValue:P.value,"label-width":"150rpx",rules:q,style:{padding:"32rpx 0 0"}},{default:l((()=>[s(V,{required:"",label:"用户名",name:"userName"},{default:l((()=>[s(_,{modelValue:P.value.userName,"onUpdate:modelValue":u[0]||(u[0]=e=>P.value.userName=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),s(V,{required:"",label:"旧密码",name:"oldPassword"},{default:l((()=>[s(_,{modelValue:P.value.oldPassword,"onUpdate:modelValue":u[1]||(u[1]=e=>P.value.oldPassword=e),type:"password",placeholder:"请输入旧密码"},null,8,["modelValue"])])),_:1}),s(V,{required:"",label:"新密码",name:"password"},{default:l((()=>[s(_,{type:"password",modelValue:P.value.password,"onUpdate:modelValue":u[2]||(u[2]=e=>P.value.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),s(V,{required:"",label:"确认密码",name:"confirmPassword"},{default:l((()=>[s(_,{type:"password",modelValue:P.value.confirmPassword,"onUpdate:modelValue":u[3]||(u[3]=e=>P.value.confirmPassword=e),placeholder:"请确认密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(x,{class:"btns"},{default:l((()=>[s(N,{type:"primary",onClick:g},{default:l((()=>[t(" 修改密码 ")])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-dedfbb5a"]]);export{P as default};
